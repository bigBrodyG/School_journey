# MAPPA PRECISA DELLA MEMORIA - LAYOUT BYTE-PER-BYTE

## ğŸ“Š LAYOUT GENERALE (Indirizzi Virtuali x86-64)

```
0xFFFFFFFFFFFFFFFF â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Kernel Space
                   â”‚                                     â”‚
0x7FFFFFFFF000     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚            STACK                    â”‚ â† 132 KB disponibili
0x7FFFFFFDE000     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚                                     â”‚
                   â”‚         Memory Gap                  â”‚
                   â”‚                                     â”‚
0x426000           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚               HEAP                  â”‚ â† 132 KB disponibili
0x405000           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
0x404078           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                   â”‚     .bss (16 bytes)                 â”‚
0x404068           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚     .data (32 bytes)                â”‚
0x404048           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚                                     â”‚
0x403000           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚     .rodata (664 bytes)             â”‚
0x402000           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚                                     â”‚
0x401000           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚     .text (1545 bytes)              â”‚
0x4010C0           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚                                     â”‚
0x400000           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† Program Base
```

---

## ğŸ¯ SEGMENTO .TEXT - CODICE FUNZIONI

```
â”Œâ”€ Indirizzo â”€â”¬â”€ Dimensione â”€â”¬â”€â”€â”€â”€â”€â”€ Funzione â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€ Bytes â”€â”€â”
â”‚ 0x4011A6   â”‚    179 B     â”‚  create_student()       â”‚   0xB3    â”‚
â”‚ 0x401259   â”‚     ~60 B    â”‚  print_student()        â”‚   ~0x3C   â”‚  
â”‚ 0x401295   â”‚    ~180 B    â”‚  show_memory_layout()   â”‚   ~0xB4   â”‚
â”‚ 0x401448   â”‚    640 B     â”‚  main()                 â”‚   0x2A0   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TOTALE: 1545 bytes (0x609) - Confermato da readelf
```

---

## ğŸ”¤ SEGMENTO .RODATA - STRINGHE E COSTANTI

```
â”Œâ”€ Offset â”€â”¬â”€ Indirizzo â”€â”¬â”€â”€ Contenuto â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ Bytes â”€â”
â”‚   +0x00  â”‚  0x402000  â”‚  "MemoryDemo\0"              â”‚   12    â”‚
â”‚   +0x0C  â”‚  0x40200C  â”‚  [padding alignment]          â”‚    4    â”‚
â”‚   +0x10  â”‚  0x402010  â”‚  "=== %s ===\n\0"           â”‚   11    â”‚
â”‚   +0x1B  â”‚  0x40201B  â”‚  [padding]                    â”‚    5    â”‚
â”‚   +0x20  â”‚  0x402020  â”‚  "Errore malloc!\n\0"        â”‚   16    â”‚
â”‚   +0x30  â”‚  0x402030  â”‚  "ID: %d, Nome: %s, Voto: %.1f\n\0" â”‚ 27 â”‚
â”‚   +0x4B  â”‚  0x40204B  â”‚  [padding]                    â”‚    5    â”‚
â”‚   +0x50  â”‚  0x402050  â”‚  "\n=== LAYOUT MEMORIA ===\n\0" â”‚   25  â”‚
â”‚         ...piÃ¹ format strings...                              â”‚
â”‚  +0x1D3  â”‚  0x4021D3  â”‚  "Mario\0"                   â”‚    6    â”‚
â”‚  +0x1D9  â”‚  0x4021D9  â”‚  "Anna\0"                    â”‚    5    â”‚
â”‚         ...padding finale...                                  â”‚
â”‚  +0x298  â”‚  0x402298  â”‚  [fine segmento]             â”‚   ---   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TOTALE: 664 bytes con ~60% utilizzato, ~40% padding
```

---

## ğŸ  SEGMENTO .DATA - VARIABILI GLOBALI INIZIALIZZATE

```
â”Œâ”€ Indirizzo â”€â”¬â”€ Variabile â”€â”€â”€â”€â”€â”€â”¬â”€ Tipo â”€â”€â”€â”€â”¬â”€ Valore â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ Bytes â”€â”
â”‚  0x404048  â”‚  counter         â”‚  int      â”‚  0x0000000A     â”‚    4    â”‚
â”‚  0x40404C  â”‚  [padding]       â”‚  ---      â”‚  0x00000000     â”‚    4    â”‚
â”‚  0x404050  â”‚  program_name    â”‚  char*    â”‚  0x0000000402000â”‚    8    â”‚
â”‚  0x404058  â”‚  [reserved]      â”‚  ---      â”‚  0x0000...      â”‚   16    â”‚
â”‚  0x404068  â”‚  [fine segmento] â”‚  ---      â”‚  ---            â”‚   ---   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TOTALE: 32 bytes - 12 bytes dati + 20 bytes padding/riservati
```

**NOTA CRITICA:** program_name punta a 0x402000 (.rodata) dove inizia "MemoryDemo"

---

## ğŸ«¥ SEGMENTO .BSS - VARIABILI NON INIZIALIZZATE

```
â”Œâ”€ Indirizzo â”€â”¬â”€ Variabile â”€â”€â”¬â”€ Tipo â”€â”€â”€â”€â”¬â”€ Valore â”€â”€â”€â”€â”€â”¬â”€ Bytes â”€â”
â”‚  0x404068  â”‚  global_ptr  â”‚  char*    â”‚  0x00000000  â”‚    8    â”‚
â”‚  0x404070  â”‚  [riservato] â”‚  ---      â”‚  0x00000000  â”‚    8    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TOTALE: 16 bytes - Solo 50% utilizzati
```

---

## ğŸ“š STACK - FRAME DELLE FUNZIONI

### FRAME create_student() - PRIMO BREAKPOINT

```
RSP: 0x7FFFFFFFE240
â”Œâ”€ Stack Addr â”€â”€â”¬â”€ Contenuto â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ Descrizione â”€â”€â”€â”€â”€â”
â”‚ 0x7FFFFFFFE240â”‚  0x00000000004021D3             â”‚ param: name        â”‚
â”‚ 0x7FFFFFFFE248â”‚  0x0000000141080000             â”‚ param: id+score    â”‚
â”‚ 0x7FFFFFFFE250â”‚  0x0000000000000000             â”‚ padding            â”‚
â”‚ 0x7FFFFFFFE258â”‚  0x00007FFFF7FFE2F0             â”‚ local: s (ptr)     â”‚
â”‚ 0x7FFFFFFFE260â”‚  0x00007FFFFFFFE2A0             â”‚ saved RBP          â”‚
â”‚ 0x7FFFFFFFE268â”‚  0x0000000000401448             â”‚ return address     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
RBP: 0x7FFFFFFFE260
FRAME SIZE: 40 bytes
```

### FRAME create_student() - SECONDO BREAKPOINT

```
â”Œâ”€ Stack Addr â”€â”€â”¬â”€ Contenuto â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ Descrizione â”€â”€â”€â”€â”€â”
â”‚ 0x7FFFFFFFE240â”‚  0x00000000004021D9             â”‚ param: name        â”‚
â”‚ 0x7FFFFFFFE248â”‚  0x0000000241100000             â”‚ param: id+score    â”‚
â”‚ 0x7FFFFFFFE250â”‚  0x0000000000000000             â”‚ padding            â”‚
â”‚ 0x7FFFFFFFE258â”‚  0x0000000000405720             â”‚ local: s (ptr)     â”‚
â”‚ 0x7FFFFFFFE260â”‚  0x00007FFFFFFFE2A0             â”‚ saved RBP          â”‚
â”‚ 0x7FFFFFFFE268â”‚  0x0000000000401465             â”‚ return address     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**OSSERVAZIONE CRITICA:** Il secondo malloc ha restituito 0x405720 (heap del processo) invece che heap di sistema.

---

## ğŸ—ï¸ HEAP - ALLOCAZIONI DINAMICHE

### ALLOCAZIONI VERIFICATE:

```
â”Œâ”€ Ordine â”€â”¬â”€ Indirizzo â”€â”€â”€â”€â”¬â”€ Dimensione â”€â”¬â”€â”€â”€ Contenuto â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    1Â°    â”‚ 0x7FFFF7FFE2F0 â”‚   28 bytes   â”‚ Student{1,"Mario",8.5}   â”‚
â”‚    2Â°    â”‚ 0x405720       â”‚   28 bytes   â”‚ Student{2,"Anna",9.0}    â”‚
â”‚    3Â°    â”‚ 0x405xxx       â”‚   50 bytes   â”‚ "stringa su heap"        â”‚
â”‚    4Â°    â”‚ 0x405xxx       â”‚   20 bytes   â”‚ calloc array[5]          â”‚
â”‚    5Â°    â”‚ 0x405xxx       â”‚   32 bytes   â”‚ realloc array[8]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TOTALE PAYLOAD: 158 bytes
METADATA HEAP: ~50 bytes (headers malloc)
TOTALE UTILIZZATO: ~208 bytes su 132KB (0.15%)
```

---

## ğŸ§© STRUTTURA Student - LAYOUT INTERNO

```
struct Student {                 â† Indirizzo base (es. 0x405720)
â”Œâ”€ Offset â”€â”¬â”€ Campo â”€â”¬â”€ Tipo â”€â”€â”€â”€â”¬â”€ Dim â”€â”¬â”€â”€â”€â”€ Valore â”€â”€â”€â”€â”
â”‚   +0x00  â”‚   id    â”‚   int     â”‚  4 B  â”‚  0x00000001   â”‚
â”‚   +0x04  â”‚  name   â”‚ char[20]  â”‚ 20 B  â”‚ "Mario\0\0..." â”‚
â”‚   +0x18  â”‚  score  â”‚  float    â”‚  4 B  â”‚  0x41080000   â”‚ â† 8.5 in IEEE754
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TOTALE: 28 bytes (confermato da sizeof)
}
```

**VERIFICA IEEE754:** 8.5 = 0x41080000 (1.0625 Ã— 2Â³ in single precision)

---

## ğŸ“ ANALISI DELL'EFFICIENZA SPAZIALE

```
â”Œâ”€ Segmento â”€â”¬â”€ Allocato â”€â”¬â”€ Utilizzato â”€â”¬â”€ Overhead â”€â”¬â”€ Efficienza â”€â”
â”‚   .text    â”‚  1545 B    â”‚   ~1400 B    â”‚    ~10%    â”‚     90%      â”‚
â”‚  .rodata   â”‚   664 B    â”‚    ~400 B    â”‚    ~40%    â”‚     60%      â”‚
â”‚   .data    â”‚    32 B    â”‚     12 B     â”‚    ~63%    â”‚     37%      â”‚
â”‚   .bss     â”‚    16 B    â”‚      8 B     â”‚    ~50%    â”‚     50%      â”‚
â”‚   Stack    â”‚  132 KB    â”‚    ~200 B    â”‚   99.85%   â”‚    0.15%     â”‚
â”‚   Heap     â”‚  132 KB    â”‚    ~200 B    â”‚   99.85%   â”‚    0.15%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CONSIDERAZIONE FINALE:** L'overhead di sistema (padding, allineamento, riserve) rappresenta una frazione significativa soprattutto nei segmenti dati, mentre Stack e Heap mostrano l'allocazione conservativa tipica dei sistemi moderni per gestire picchi di utilizzo futuro.